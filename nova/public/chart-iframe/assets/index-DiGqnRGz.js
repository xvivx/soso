var Et=Object.defineProperty,Ut=Object.defineProperties;var qt=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var Dt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Ee=(e,t,r)=>t in e?Et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,We=(e,t)=>{for(var r in t||(t={}))Dt.call(t,r)&&Ee(e,r,t[r]);if(Be)for(var r of Be(t))St.call(t,r)&&Ee(e,r,t[r]);return e},Ve=(e,t)=>Ut(e,qt(t));var Pt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var T=(e,t,r)=>Ee(e,typeof t!="symbol"?t+"":t,r);var Ue=(e,t,r)=>new Promise((n,i)=>{var s=l=>{try{c(r.next(l))}catch(h){i(h)}},o=l=>{try{c(r.throw(l))}catch(h){i(h)}},c=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);c((r=r.apply(e,t)).next())});import"./comps-DFRvWF-y.js";import{n as a,g as Ot,a as Qt}from"./cores-DvWBAqn4.js";var Di=Pt((P,O)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var se=(e=>(e.advanced="advanced",e.basic="basic",e))(se||{});const Lt={"500ms":{label:"Tick",value:{period:1,interval:500,timeUnit:"millisecond"}},"5s":{label:"5 Second",value:{period:1,interval:5,timeUnit:"second"}},"15s":{label:"15 Second",value:{period:1,interval:15,timeUnit:"second"}},"30s":{label:"30 Second",value:{period:1,interval:30,timeUnit:"second"}},"1m":{label:"1 Min",value:{period:1,interval:1,timeUnit:"minute"}},"5m":{label:"5 Min",value:{period:1,interval:5,timeUnit:"minute"}},"1h":{label:"1 Hour",value:{period:2,interval:60,timeUnit:"minute"}},"4h":{label:"4 Hours",value:{period:2,interval:240,timeUnit:"minute"}},"1d":{label:"1 Day",value:{period:1,interval:1,timeUnit:"day"}}};function pe(e){return(t,r,n,i,s)=>{const o=c=>s({quotes:c.quotes.map(l=>(l.Close&&(l.Close*=1e3),l.High&&(l.High*=1e3),l.Low&&(l.Low*=1e3),l.Open&&(l.Open*=1e3),l))});return e?e(t,r,n,i,o):(s({quotes:[]}),Promise.resolve([]))}}var Mt=1e4,F=null;a.deprecationWarning=function(e){F||(F={},setInterval(function(){for(var t in F)console.warn(t+" ("+F[t]+" occurrences)"),delete F[t]},Mt)),F[e]?F[e]++:F[e]=1};var u=a.deprecationWarning;Function.prototype.ciqInheritsFrom||(Function.prototype.ciqInheritsFrom=function(e,t){u("Function.prototype.ciqInheritsFrom() has been deprecated.  Use CIQ.inheritsFrom(me, ctor, autosuper) instead."),a.inheritsFrom(this,e,t)},Function.prototype.stxInheritsFrom=Function.prototype.ciqInheritsFrom);String.prototype.capitalize=function(){return u("String.prototype.capitalize() has been deprecated.  Use CIQ.capitalize(string) instead."),a.capitalize(this)};CanvasRenderingContext2D.prototype.dashedLineTo=function(e,t,r,n,i){if(u("CanvasRenderingContext2D.prototype.dashedLineTo() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo(), lineTo() and setLineDash() instead."),!(i instanceof Array)){i&&console.log('WARNING: Unsupported drawing pattern "'+i+'"; defaulting to "solid"'),this.stxLine(e,t,r,n,this.strokeStyle,this.globalAlpha,this.lineWidth);return}if(!(t===1/0||e===1/0||n===1/0||r===1/0)){var s=function(v,_){return v-_<=1e-8},o=function(v,_){return v-_>=-1e-8},c=function(v,_){return Math.min(v,_)},l=function(v,_){return Math.max(v,_)},h={thereYet:o,cap:c},d={thereYet:o,cap:c};if(t-n>0&&(d.thereYet=s,d.cap=l),e-r>0&&(h.thereYet=s,h.cap=l),this.moveTo(e,t),!(isNaN(e)||isNaN(t)))for(var g=e,f=t,b=0,m=!0;!(h.thereYet(g,r)&&d.thereYet(f,n));){var y=Math.atan2(n-t,r-e),D=i[b];g=h.cap(r,g+Math.cos(y)*D),f=d.cap(n,f+Math.sin(y)*D),m?this.lineTo(g,f):this.moveTo(g,f),b=(b+1)%i.length,m=!m}}};CanvasRenderingContext2D.prototype.stxLine=function(e,t,r,n,i,s,o,c){u("CanvasRenderingContext2D.prototype.stxLine() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo() and lineTo() instead."),this.beginPath(),this.lineWidth=o,this.strokeStyle=i,this.globalAlpha=s,c&&c.length?this.dashedLineTo(e,t,r,n,c):(this.moveTo(e,t),this.lineTo(r,n)),this.stroke(),this.closePath(),this.lineWidth=1};CanvasRenderingContext2D.prototype.stxCircle=function(e,t,r,n){u("CanvasRenderingContext2D.prototype.stxCircle() has been deprecated.  Use native CanvasRenderingContext2D methods such as arc() instead."),this.beginPath(),this.arc(e,t,r,0,2*Math.PI,!1),n&&this.fill(),this.stroke(),this.closePath()};a.getAjaxServer=function(e){return u("CIQ.getAjaxServer() has been deprecated.  Use `new XMLHttpRequest` instead."),new XMLHttpRequest};a.convertClickToTouchEnd=function(e){u("CIQ.convertClickToTouchEnd() has been deprecated.  Use CIQ.safeClickTouch() instead.");var t=document.getElementById(e),r=t.getAttribute("onClick");r&&(t.removeAttribute("onClick"),t.setAttribute("onTouchEnd",r))};a.standardUTCDate=function(e){u("CIQ.standardUTCDate(dt) has been deprecated.  Use dt.toISOString() instead.");var t=e.getUTCMonth()+1;t<10&&(t="0"+t);var r=e.getUTCDate();r<10&&(r="0"+r);var n=e.getUTCHours();n<10&&(n="0"+n);var i=e.getUTCMinutes();i<10&&(i="0"+i);var s=e.getUTCSeconds();return s<10&&(s="0"+s),""+e.getUTCFullYear()+"-"+t+"-"+r+"T"+n+":"+i+":"+s+"Z"};a.isDST=function(e){u("CIQ.isDST() has been deprecated.  Use dt.toISOString() instead."),e||(e=new Date);var t=new Date(e.getFullYear(),0,1),r=new Date(e.getFullYear(),6,1),n=Math.max(t.getTimezoneOffset(),r.getTimezoneOffset());return e.getTimezoneOffset()!=n};a.getEventDOM=function(e){return u("CIQ.getEventDOM() has been deprecated.  Use `e.target` instead."),e?e.target:window.event.srcElement};a.outerWidth=function(e){u("CIQ.outerWidth() has been deprecated.  Use `CIQ.elementDimensions(node, {margin:1, padding:1, border:1}).width` instead.");var t=e.offsetWidth;return t+=a.stripPX(getComputedStyle(e).marginLeft),t+=a.stripPX(getComputedStyle(e).marginRight),t};a.clearNode=function(e){if(u("CIQ.clearNode() has been deprecated.  Use `node.innerHTML=''` instead."),e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)};a.findClosestParent=function(e,t){u("CIQ.findClosestParent() has been deprecated.  Use `Element.parentElement.prototype.closest()` instead.");var r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(i){return typeof document.body[i]=="function"?(r=i,!0):!1}),!r)return!1;for(var n;e;){if(n=e.parentElement,n&&n[r](t))return n;e=n}return null};a.appendClassName=function(e,t){if(u("CIQ.appendClassName() has been deprecated.  Use `node.classList.add(className)` instead."),!!e&&e.className!=t){for(var r=e.className.split(" "),n=0;n<r.length;n++)if(r[n]==t)return;e.className?e.className+=" "+t:e.className=t}};a.unappendClassName=function(e,t){if(u("CIQ.unappendClassName() has been deprecated.  Use `node.classList.remove(className)` instead."),!!e&&e.className.indexOf(t)!=-1)if(e.className==t)e.className="";else{for(var r=e.className.split(" "),n="",i=0;i<r.length;i++)r[i]!=t&&(n!==""&&(n+=" "),n+=r[i]);e.className=n}};a.swapClassName=function(e,t,r){u("CIQ.swapClassName() has been deprecated.  Use `node.classList.replace(oldClassName, newClassName)` instead."),a.unappendClassName(e,r),a.appendClassName(e,t)};a.hasClassName=function(e,t){return u("CIQ.hasClassName() has been deprecated.  Use `node.classList.contains(className)` instead."),e?(" "+e.className+" ").indexOf(" "+t+" ")>-1:!1};a.toggleClassName=function(e,t){u("CIQ.toggleClassName() has been deprecated.  Use `node.classList.toggle(className)` instead."),a.hasClassName(e,t)?a.unappendClassName(e,t):a.appendClassName(e,t)};a.translatableTextNode=function(e,t,r){if(u("CIQ.translatableTextNode() has been deprecated.  Use `CIQ.makeTranslatableElement(element, stx, original, language)`, where `element` is the parent element, instead."),e.translationCallback){var n=document.createElement("cq-translate");return n.setAttribute("cq-translate-original",t),n.innerHTML=e.translationCallback(t,r),n}return document.createTextNode(t)};(function(){var e=document.attachEvent,t=navigator.userAgent.match(/Trident/),r=function(){var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(c){return setTimeout(c,20)};return function(c){return o(c)}}(),n=function(){var o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(c){return o(c)}}();function i(o){var c=o.target||o.srcElement;c.__resizeRAF__&&n(c.__resizeRAF__),c.__resizeRAF__=r(function(){var l=c.__resizeTrigger__;l.__resizeListeners__.forEach(function(h){h.call(l,o)})})}function s(o){var c=this;c.contentDocument.defaultView.__resizeTrigger__=c.__resizeElement__,c.contentDocument.defaultView.addEventListener("resize",i)}a.addResizeListener=function(o,c){u("CIQ.addResizeListener() has been deprecated.  Use CIQ.UI.addResizeListener() instead.");var l=document.querySelector("cq-ui-manager");if(l.length>0&&(l=l[0],l.registerForResize(o)),!o.__resizeListeners__)if(o.__resizeListeners__=[],e)o.__resizeTrigger__=o,o.attachEvent("onresize",i);else{var h=o.__resizeTrigger__=document.createElement("object");h.setAttribute("style","visibility:hidden; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; border:0px;"),h.__resizeElement__=o,h.onload=s,h.type="text/html",t&&o.appendChild(h),h.data="about:blank",t||o.appendChild(h)}o.__resizeListeners__.push(c)},a.removeResizeListener=function(o,c){u("CIQ.removeResizeListener() has been deprecated.  Use CIQ.UI.removeResizeListener() instead.");var l=document.querySelector("cq-ui-manager");l.length>0&&(l=l[0],l.unregisterForResize(o)),o.__resizeListeners__.splice(o.__resizeListeners__.indexOf(c),1),o.__resizeListeners__.length||(e?o.detachEvent("onresize",i):(o.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",i),o.__resizeTrigger__=!o.removeChild(o.__resizeTrigger__)))}})();a.Renderer.prototype.performCalculations=function(){u("CIQ.Renderer.prototype.performCalculations has been deprecated.  Use CIQ.Renderer.prototype.adjustYAxis instead.")};a.ChartEngine.hideDates=function(){return u("CIQ.Renderer.hideDates is no longer supported.  To hide an axis, set its noDraw property.  To hide the floating date label, set stxx.controls.floatDate=null."),!1};a.ChartEngine.chartShowsHighs=function(e){return u("CIQ.ChartEngine.prototype.chartShowsHighs has been deprecated.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),{line:1,colored_line:1,mountain:1,colored_mountain:1,baseline_delta:1,baseline_delta_mountain:1,histogram:1,scatterplot:1,step:1,colored_step:1}[e]!=1};a.ChartEngine.prototype.createBlock=function(e,t,r,n,i,s){u("CIQ.ChartEngine.prototype.createBlock has been deprecated.  Use native canvas context operation fillRect instead."),s||(s=this.chart.context),typeof n!="undefined"&&(this.canvasColor(i,s),s.fillRect(e,r,t,n),s.globalAlpha=1)};a.ChartEngine.prototype.setVolumeUnderlay=function(e){u("CIQ.ChartEngine.prototype.setVolumeUnderlay is no longer supported.  To enable a volume underlay, use CIQ.Studies.addStudy(stxx, 'vol undr').  To disable, use CIQ.Studies.removeStudy."),this.layout.volumeUnderlay=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")};a.ChartEngine.prototype.serializeDrawings=function(){return u("CIQ.ChartEngine.prototype.serializeDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.exportDrawings instead."),this.exportDrawings()};a.ChartEngine.prototype.reconstructDrawings=function(e){u("CIQ.ChartEngine.prototype.reconstructDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.importDrawings instead."),this.importDrawings(e)};a.ChartEngine.prototype.computePosition=function(e,t){u("CIQ.ChartEngine.prototype.computePosition has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromBar instead."),typeof t=="undefined"&&(t=0);var r=e*this.layout.candleWidth+t+this.micropixels;return r};a.ChartEngine.prototype.computeColor=function(e,t){return u("CIQ.ChartEngine.prototype.computeColor has been deprecated.  There is no suggested alternative."),e<t?"stx_candle_up":e>t?"stx_candle_down":"stx_candle_shadow"};a.ChartEngine.prototype.computeLength=function(e,t){u("CIQ.ChartEngine.prototype.computeLength has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice to compute values and find the difference.");var r=this.pixelFromPrice(e),n=this.pixelFromPrice(t);return n-r};a.ChartEngine.prototype.setCrosshairColors=function(){u("CIQ.ChartEngine.prototype.setCrosshairColors is no longer supported.  Use CSS to set the crosshair color")};a.ChartEngine.prototype.valueFromPixelUntransform=function(e,t,r){return u("CIQ.ChartEngine.prototype.valueFromPixelUntransform has been deprecated.  Use CIQ.ChartEngine.prototype.valueFromPixel instead."),this.valueFromPixel(e,t,r)};a.ChartEngine.prototype.pixelFromPriceTransform=function(e,t,r){return u("CIQ.ChartEngine.prototype.pixelFromPriceTransform has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice instead."),this.pixelFromPrice(e,t,r)};a.ChartEngine.prototype.isDailyInterval=function(e){return u("CIQ.ChartEngine.prototype.isDailyInterval has been deprecated. Use CIQ.ChartEngine.isDailyInterval instead."),a.ChartEngine.isDailyInterval(e)};a.ChartEngine.prototype.newChart=function(e,t,r,n,i){u("CIQ.ChartEngine.prototype.newChart has been deprecated. Use CIQ.ChartEngine.prototype.loadChart instead.");var s={masterData:t,chart:r};return a.extend(s,i,!0),this.loadChart(e,s,n)};a.ChartEngine.prototype.streamTrade=function(e,t,r,n){u("CIQ.ChartEngine.prototype.streamTrade has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead.");var i=this.chart;n||(n={}),n.chart&&(i=n.chart),n.fillGaps=this.streamParameters.fillGaps;var s=typeof e=="object",o=s?e.last:arguments[0],c=s?e.volume:arguments[1],l=s?e.bid:null,h=s?e.ask:null;s||(t=arguments[2],r=arguments[3]),r&&(n.secondarySeries=r);var d={DT:t,Last:o,Volume:c,Bid:l,Ask:h};this.updateChartData(d,i,n)};a.ChartEngine.prototype.appendMasterData=function(e,t,r){u("CIQ.ChartEngine.prototype.appendMasterData has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead."),this.updateChartData(e,t,r)};a.ChartEngine.prototype.setPeriodicityV2=function(e,t,r,n){u("CIQ.ChartEngine.prototype.setPeriodicityV2 has been deprecated. Use CIQ.ChartEngine.prototype.setPeriodicity instead."),typeof r=="function"&&(n=r,r=null),!this.runPrepend("setPeriodicityV2",arguments)&&(this.setPeriodicity(e,t,r,n),this.runAppend("setPeriodicityV2",arguments))};a.ChartEngine.prototype.createTickXAxisWithDates=function(e){e||(e=this.chart),e.xaxis=[];var t,r=e.context,n=[a.MILLISECOND,a.SECOND,a.MINUTE,a.HOUR,a.DAY,a.MONTH,a.YEAR];if(!this.timeIntervalMap){var i=r.measureText.bind(r);t={},t[a.MILLISECOND]={arr:[1,2,5,10,20,50,100,250,500],minTimeUnit:0,maxTimeUnit:1e3,measurement:i("10:00:00.000")},t[a.SECOND]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:i("10:00:00")},t[a.MINUTE]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:i("10:00")},t[a.HOUR]={arr:[1,2,3,4,6,12],minTimeUnit:0,maxTimeUnit:24,measurement:i("10:00")},t[a.DAY]={arr:[1,2,7,14],minTimeUnit:1,maxTimeUnit:32,measurement:i("30")},t[a.MONTH]={arr:[1,2,3,6],minTimeUnit:1,maxTimeUnit:13,measurement:i("Mar")},t[a.YEAR]={arr:[1,2,3,5],minTimeUnit:1,maxTimeUnit:2e7,measurement:i("2000")},t[a.DECADE]={arr:[10],minTimeUnit:0,maxTimeUnit:2e6,measurement:i("2000")},this.timeIntervalMap=t}t=this.timeIntervalMap;for(var s=[31,28,31,30,31,30,31,31,30,31,30,31],o=this.layout.periodicity,c=this.layout.interval,l=e.maxTicks,h=e.dataSegment,d=e.xAxis,g=h.length,f=d.idealTickSizePixels||d.autoComputedTickSizePixels,b=this.chart.width/f,m=0;m<g&&!h[m];m++);if(m==g)return[];var y=0,D=this.layout.timeUnit||"minute";isNaN(c)&&(D=c,c=1);var v=0;switch(D){case"millisecond":v=1;break;case"second":v=1e3,n.splice(0,1);break;case"minute":v=6e4,n.splice(0,2);break;case"day":v=864e5,n.splice(0,4);break;case"week":v=864e5*7,n.splice(0,4);break;case"month":v=864e5*30,n.splice(0,5);break}var _=this.layout.aggregationType;if(v&&(!_||_=="ohlc"||_=="heikinashi")?y=c*o*v*g:y=h[g-1].DT.getTime()-h[m].DT.getTime(),y===0)if(e.market){var S=e.market.newIterator({begin:new Date,interval:"day",periodicity:1});S.next();var le=S.previous();S=this.standardMarketIterator(le,null,e);var B=S.next();y=(B.getTime()-le.getTime())*l}else y=24*60*60*1e3*l;else y=y/g*l;var q=y/b,p;for(p=0;p<n.length&&!(n[p]>q+.001);p++);if(q<1&&console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodicity and it is sorted from OLDEST to NEWEST."),p==n.length)p--;else if(p>0){var je=n[p-1],Fe=t[je].arr,Tt=Fe[Fe.length-1];q-je*Tt<n[p]-q&&p--}var C=d.timeUnit||n[p];d.activeTimeUnit=C;var j=t[C],W=j.arr;for(p=0;p<W.length&&!(W[p]*C>q);p++);(p==W.length||q-W[p-1]*C<W[p]*C-q)&&p--,j.measurement.width*2<this.layout.candleWidth&&(p=0);var ue=d.timeUnitMultiplier||W[p],xe=[],V=this.layout.candleWidth;for(p=0;p<=l&&!h[p];p++);var we;if(p>0&&p<l){e.market&&(we=this.standardMarketIterator(h[p].DT,d.adjustTimeZone?this.displayZone:null));for(var Ne=p;Ne>0;Ne--){var Re={};we&&!(e.lineApproximation&&V<1)&&(Re.DT=we.previous()),e.xaxis.unshift(Re)}}var E=0,N=j.minTimeUnit,Y=-1,ze=!0;function he(U){var M,A;return C==a.MILLISECOND?(M=U.getMilliseconds(),A=U.getSeconds()):C==a.SECOND?(M=U.getSeconds(),A=U.getMinutes()):C==a.MINUTE?(M=U.getMinutes(),A=U.getHours()):C==a.HOUR?(M=U.getHours()+U.getMinutes()/60,A=U.getDate()):C==a.DAY?(M=U.getDate(),A=U.getMonth()+1):C==a.MONTH?(M=U.getMonth()+1,A=U.getFullYear()):C==a.YEAR?(M=U.getFullYear(),A=U.getFullYear()+1e3):(M=U.getFullYear(),A=0),[M,A]}var R=he(h[p].DT),G,Q=0,te=0,de=h[p].tick;for(Q;Q<de&&(G=he(this.chart.dataSet[de-Q].DT),G[1]==R[1]);Q++)R=G;for(te;te<this.chart.dataSet.length-de&&(G=he(this.chart.dataSet[de+te].DT),G[1]==R[1]);te++)R=G;var Ie=null;for(p=0;p<l+te;p++){var X=h[p];if(X?Q&&(X=e.dataSet[X.tick-Q]):X=e.xaxis[p],p<g){var _e=X;if(_e.displayDate&&d.adjustTimeZone?E=_e.displayDate:E=_e.DT,p&&!Q&&e.segmentImage){var $e=e.segmentImage[p];V=($e.leftOffset-$e.candleWidth/2)/p}}else if(e.market){if(this.layout.interval=="tick"&&!d.futureTicksInterval||e.lineApproximation&&V<1||!d.futureTicks)break;Ie||(Ie=this.standardMarketIterator(h[g-1].DT,d.adjustTimeZone?this.displayZone:null)),E=Ie.next()}if(E){var w=null,re,He=p-Q,Te={DT:E};p<g?Te.data=X:Te.data=null,Q?(Q--,p--):!e.xaxis[p]&&p<l&&e.xaxis.push(Te),R=he(E);var Z=R[0],ne=R[1];if(Y!=ne&&(Z<=N&&(N=j.minTimeUnit),re=e.left+He*V-1,w=null,C==a.HOUR||C==a.MINUTE&&Y>ne?(this.internationalizer?w=this.internationalizer.monthDay.format(E):w=E.getMonth()+1+"/"+E.getDate(),d.formatter&&(w=d.formatter(E,"boundary",a.DAY,1,w))):C==a.DAY?Y>ne?(w=E.getFullYear(),d.formatter&&(w=d.formatter(E,"boundary",a.YEAR,1,w))):(w=a.monthAsDisplay(E.getMonth(),!1,this),d.formatter&&(w=d.formatter(E,"boundary",a.MONTH,1,w))):C==a.MONTH&&(w=E.getFullYear(),d.formatter&&(w=d.formatter(E,"boundary",a.YEAR,1,w))),w&&Y!=-1&&xe.push(new a.ChartEngine.XAxisLabel(re,"boundary",w))),Z>=N){if(N==j.minTimeUnit&&ne==Y)continue;var I=new Date(+E);re=e.left+(2*He+1)*V/2-1;var L=Math.floor(Z/ue)*ue;if(L<Z&&(this.layout.interval=="week"?L=Z:re-=V/2),C==a.MILLISECOND?I.setMilliseconds(L):C==a.SECOND?(I.setMilliseconds(0),I.setSeconds(L)):C==a.MINUTE?(I.setMilliseconds(0),I.setSeconds(0),I.setMinutes(L)):C==a.HOUR?(I.setMilliseconds(0),I.setSeconds(0),I.setMinutes(0),I.setHours(L)):C==a.DAY?I.setDate(Math.max(1,L)):C==a.MONTH?(I.setDate(1),I.setMonth(L-1)):(C==a.YEAR,I.setDate(1),I.setMonth(0)),N=L+ue,C==a.DAY&&(j.maxTimeUnit=s[I.getMonth()]+1),N>=j.maxTimeUnit&&(N=j.minTimeUnit),Y=ne,ze&&L<Z){ze=!1;continue}C==a.DAY?w=I.getDate():C==a.MONTH?w=a.monthAsDisplay(I.getMonth(),!1,this):C==a.YEAR||C==a.DECADE?w=I.getFullYear():w=a.timeAsDisplay(I,this,C),d.formatter&&(w=d.formatter(I,"line",C,ue,w)),xe.push(new a.ChartEngine.XAxisLabel(re,"line",w))}}}return xe};a.ChartEngine.prototype.addChart=function(e,t){u("CIQ.ChartEngine.prototype.addChart has been deprecated. Add manually to stxx.charts object instead."),t.name=e,this.charts[e]=t};var At=a.ChartEngine.prototype.changeOccurred;a.ChartEngine.prototype.changeOccurred=function(e){this.currentlyImporting||(this.changeCallback&&this.changeCallback(this,e),At.call(this,e))};var kt=a.ChartEngine.prototype.construct;a.ChartEngine.prototype.construct=function(){function e(i,s,o){return i._deprecatedPropertyValues||(i._deprecatedPropertyValues={}),s in i._deprecatedPropertyValues||(i._deprecatedPropertyValues[s]=o),i._deprecatedPropertyValues[s]}function t(i,s,o){i._deprecatedPropertyValues||(i._deprecatedPropertyValues={}),i._deprecatedPropertyValues[s]=o}kt.call(this),Object.defineProperties(this,{changeCallback:{enumerable:!0,get:function(i){return function(){var s=e(this,"changeCallback",null);return s!==null&&u("CIQ.ChartEngine.prototype.changeCallback has been deprecated.  Use CIQ.ChartEngine.prototype.addEventListener instead."),s}}(),set:function(i){return function(s){u("CIQ.ChartEngine.prototype.changeCallback has been deprecated.  Use CIQ.ChartEngine.prototype.addEventListener instead."),t(this,"changeCallback",s)}}()},highLowBars:{enumerable:!0,get:function(i){return function(){return u("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),e(this,"highLowBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,wave:!0,rangechannel:!0,none:!0})}}(),set:function(i){return function(s){u("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),t(this,"highLowBars",s)}}()},standaloneBars:{enumerable:!0,get:function(i){return function(){return u("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),e(this,"standaloneBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0})}}(),set:function(i){return function(s){u("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),t(this,"standaloneBars",s)}}()},barsHaveWidth:{enumerable:!0,get:function(i){return function(){return u("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),e(this,"barsHaveWidth",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0,wave:!0})}}(),set:function(i){return function(s){u("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),t(this,"barsHaveWidth",s)}}()},resizeDetectMS:{get:()=>(u("CIQ.ChartEngine.prototype.resizeDetectMS has been deprecated. Use CIQ.resizeDetectInterval instead."),a.resizeDetectInterval),set:i=>{u("CIQ.ChartEngine.prototype.resizeDetectMS has been deprecated. Use CIQ.resizeDetectInterval instead."),a.resizeDetectInterval=i}}}),this.callbacks={};function r(i,s,o){return function(){return u("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Iterate through CIQ.ChartEngine.prototype.callbackListeners instead."),e(this,i,null)}}function n(i,s){return function(o){u("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Utilize CIQ.ChartEngine.prototype.addEventListener to add a callback, and/or CIQ.ChartEngine.prototype.removeEventListener to remove one."),this._deprecatedPropertyValues||(this._deprecatedPropertyValues={});var c=this._deprecatedPropertyValues[i];c&&s.removeEventListener(i,c),o&&s.addEventListener(i,o),this._deprecatedPropertyValues[i]=o}}Object.defineProperties(this.callbacks,{studyOverlayEdit:{enumerable:!0,get:r("studyOverlayEdit"),set:n("studyOverlayEdit",this)},studyPanelEdit:{enumerable:!0,get:r("studyPanelEdit"),set:n("studyPanelEdit",this)},tap:{enumerable:!0,get:r("tap"),set:n("tap",this)},rightClick:{enumerable:!0,get:r("rightClick"),set:n("rightClick",this)},longhold:{enumerable:!0,get:r("longHold"),set:n("longHold",this)},move:{enumerable:!0,get:r("move"),set:n("move",this)},layout:{enumerable:!0,get:r("layout"),set:n("layout",this)},drawing:{enumerable:!0,get:r("drawing"),set:n("drawing",this)},drawingEdit:{enumerable:!0,get:r("drawingEdit"),set:n("drawingEdit",this)},preferences:{enumerable:!0,get:r("preferences"),set:n("preferences",this)},theme:{enumerable:!0,get:r("theme"),set:n("theme",this)},symbolChange:{enumerable:!0,get:r("symbolChange"),set:n("symbolChange",this)},symbolImport:{enumerable:!0,get:r("symbolImport"),set:n("symbolImport",this)},calculateTradingDecimalPlaces:{enumerable:!0,get:function(i){return function(){return u("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),e(this,"calculateTradingDecimalPlaces",i.chart.calculateTradingDecimalPlaces)}}(this),set:function(i){return function(s){u("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),t(this,"calculateTradingDecimalPlaces",s),i.chart.calculateTradingDecimalPlaces=s}}(this)}}),Object.defineProperties(this.chart.xAxis,{idealTickSizePixels:{enumerable:!0,get:function(i){return function(){var s=e(this,"idealTickSizePixels",null);return s}}(),set:function(i){return function(s){t(this,"idealTickSizePixels",s)}}()},timeUnit:{enumerable:!0,get:function(i){return function(){return e(this,"timeUnit",null)}}(),set:function(i){return function(s){t(this,"timeUnit",s)}}()},timeUnitMultiplier:{enumerable:!0,get:function(i){return function(){return e(this,"timeUnitMultiplier",null)}}(),set:function(i){return function(s){t(this,"timeUnitMultiplier",s)}}()}}),Object.defineProperty(this.streamParameters,"fillGaps",{enumerable:!0,get:function(i){return function(){return u("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),e(this,"fillGaps",!0)}}(),set:function(i){return function(s){u("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),t(this,"fillGaps",s)}}()})};typeof window!="undefined"&&Object.defineProperties(window,{STX:{enumerable:!0,get:function(){return u("STX namespace has been deprecated.  Use CIQ namespace instead."),a}},STXChart:{enumerable:!0,get:function(){return u("STXChart namespace has been deprecated.  Use CIQ.ChartEngine namespace instead."),a.ChartEngine}}});Math.easeInOutQuad=function(e,t,r,n){u("Math.easeInOutQuad has been deprecated. Use CIQ.EaseMachine.easeInOutQuad instead."),a.EaseMachine.easeInOutQuad(e,t,r,n)};Math.easeInOutCubic=function(e,t,r,n){u("Math.easeInOutCubic has been deprecated. Use CIQ.EaseMachine.easeInOutCubic instead."),a.EaseMachine.easeInOutCubic(e,t,r,n)};Math.easeOutCubic=function(e,t,r,n){u("Math.easeOutCubic has been deprecated. Use CIQ.EaseMachine.easeOutCubic instead."),a.EaseMachine.easeOutCubic(e,t,r,n)};a.ChartEngine.prototype.attachEngineQuoteFeed=function(e,t){u("CIQ.ChartEngine.prototype.attachEngineQuoteFeed has been deprecated. Use CIQ.ChartEngine.prototype.attachQuoteFeed instead."),this.attachQuoteFeed(e,t)};a.ChartEngine.prototype.dragPlot=function(e){u("CIQ.ChartEngine.prototype.dragPlot is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")};a.ChartEngine.prototype.dragYAxis=function(e){u("CIQ.ChartEngine.prototype.dragYAxis is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")};a.Drawing=a.Drawing||function(){this.chartsOnly=!1,this.penDown=!1};a.Drawing.prototype.setLineColor=function(){if(u("CIQ.Drawing.prototype.setLineColor has been deprecated.  Use CIQ.Drawing.prototype.setLineColor instead."),a.Drawing.prototype.getLineColor)return a.Drawing.prototype.getLineColor.apply(this,arguments)};a.Studies=a.Studies||function(){};a.Studies.quickAddStudy=function(){if(u("CIQ.Studies.quickAddStudy has been deprecated.  Use CIQ.Studies.addStudy instead."),a.Studies.addStudy)return a.Studies.addStudy.apply(null,arguments)};a.Studies.overZones=function(){if(u("CIQ.Studies.overZones has been deprecated.  Use CIQ.Studies.drawZones instead."),a.Studies.drawZones)return a.Studies.drawZones.apply(null,arguments)};a.Studies.volUnderlay=function(){u("CIQ.Studies.volUnderlay has been deprecated.  Use CIQ.Studies.createVolumeChart instead."),a.Studies.createVolumeChart&&a.Studies.createVolumeChart.apply(null,arguments)};a.Studies.determineMinMax=function(e,t,r){u("CIQ.Studies.determineMinMax is no longer supported.  The calculation is done automatically elsewhere.")};a.Studies.createYAxis=function(e,t,r,n){u("CIQ.Studies.createYAxis is no longer supported.  The action is done automatically elsewhere.")};a.Studies.volumeChart=function(e,t,r,n){u("CIQ.Studies.volumeChart has been deprecated.  Use CIQ.ChartEngine.prototype.drawHistogram instead.");var i=Number.MAX_VALUE*-1,s,o;for(s in r)for(var c=0;c<r[s].length;c++)o=r[s][c],o&&o>i&&(i=o);var l=e.panels[t.panel],h=Math.floor(l.yAxis.bottom)+.5,d=Math.floor(l.yAxis.top)+.5,g=h-d,f=e.layout.candleWidth,b=null;(!t.parameters||!t.parameters.displayBorder)&&(n=null);var m=0;n||(m=(f-e.chart.tmpWidth)/2);var y=t.getContext(e);y.lineWidth=1,e.startClip(t.panel);for(s in r){n&&(b=n[s]),y.fillStyle=s,b&&(y.strokeStyle=b),y.beginPath();for(var D=h+.5,v=Math.floor(e.pixelFromBar(0,l.chart)),_,S=0;S<r[s].length;S++){if(e.chart.dataSegment[S]&&e.chart.dataSegment[S].candleWidth?(f=e.chart.dataSegment[S].candleWidth,n||(m=f/4)):(f=e.layout.candleWidth,n||(m=(f-e.chart.tmpWidth)/2)),S===0&&(v-=f/2,_=v),o=r[s][S],!o){D=h,_+=f;continue}var le=o*(g/i),B=Math.min(Math.floor(h-g+(g-le))+.5,h),q,p;q=Math.floor(_+m),p=Math.floor(_+f-m),q=Math.max(q,v),y.moveTo(q,h),y.lineTo(p,h),y.lineTo(p,B),y.lineTo(q,B),n?(D>B||S===0)&&y.lineTo(q,D):y.lineTo(q,h),D=B,_+=f}y.fill(),y.strokeStyle=b,n&&e.layout.candleWidth>=2&&y.stroke(),y.closePath()}e.endClip()};typeof window!="undefined"&&Object.defineProperty(window,"STXSocial",{enumerable:!0,get:function(){return u("STXSocial namespace has been deprecated.  Use CIQ.Share namespace instead."),a.Share}});if(typeof $=="function"&&$.fn){$.fn.extend($.expr[":"],{trulyvisible:function(e,t,r){u("Use of jQuery has been deprecated. Use CIQ.trulyVisible() to return element visibility instead of custom pseudo-selector :trulyvisible.");var n=$(e).parents();n=n.add(e);for(var i=0;i<n.length;i++){var s=$(n[i]);if(s.css("opacity")==="0"||s.css("visibility")==="hidden"||s.css("height")==="0px"&&s.css("overflow-y")=="hidden"||!s.is(":visible"))return!1}return!0}});var jt=function(e,t){return u("Use of jQuery has been deprecated. Use CIQ.UI.stxtap() to attach a listener instead of $.fn.stxtap()."),this.each(function(){a.installTapEvent(this),typeof e=="string"?$(this).on("stxtap",e,function(r){t.call(this,r)}):$(this).on("stxtap",function(r){e.call(this,r)})})},Ft=function(e){u("Use of jQuery has been deprecated. Use CIQ.climbUpDomTree() instead of $.fn.parentsAndMe().");var t=$(this).parents();return t=t.add($(this)).get().reverse(),t},Nt=function(e){u("Use of jQuery has been deprecated. Use CIQ.cqvirtual() instead of $.fn.cqvirtual().");var t=this.clone(!0);return t.empty(),t.original=this,t},Rt=function(e){if(u("Use of jQuery has been deprecated. Use CIQ.cqrender() instead of $.fn.cqrender()."),this[0].innerHTML==this.original[0].innerHTML)return this.original;this.original.children(":not(template)").remove();var t=this.children();if(t.length){var r=t.detach();this.original.append(r)}return this.original},zt=function(){u("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedWidth().");for(var e=this,t=e.width();!t;){if(e=e.parent(),e[0].tagName==="BODY"||e[0]===window)return window.innerWidth;t=e.width()}return t},$t=function(){u("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedHeight().");for(var e=this,t=e.height();!t;){if(e=e.parent(),e[0].tagName==="BODY"||e[0]===window)return window.innerHeight;t=e.height()}return t},Ht=function(){return u("Use of jQuery has been deprecated. Use CIQ.removeChildIfNot(node, 'template') instead of $.fn.emptyExceptTemplate()."),this.children().not("template").remove(),this},Bt=function(e){u("Use of jQuery has been deprecated. Use ['false','0',null,undefined].indexOf(this.getAttribute('...'))==-1 instead of $.fn.truthyAttr().");var t=this.attr(e);return!(typeof t=="undefined"||t.toLowerCase()=="false"||t=="0")},Wt=function(e,t){return u("Use of jQuery has been deprecated. check attribute value before setting instead of $.fn.attrBetter()."),this.attr(e,function(r,n){if(typeof t=="undefined"&&(t="true"),t!==n)return t})},Vt=function(e){u("Use of jQuery has been deprecated. check hasAttribute before removing instead of $.fn.removeAttrBetter().");var t=this.attr(e);return!t&&t!==""?!1:(this.removeAttr(e),!0)},Yt=function(e){return u("Use of jQuery has been deprecated. check innerText before setting instead of $.fn.textBetter()."),this.text()===e?!1:(this.text(e),!0)};$.fn.extend({stxtap:jt,parentsAndMe:Ft,cqvirtual:Nt,cqrender:Rt,guaranteedWidth:zt,guaranteedHeight:$t,emptyExceptTemplate:Ht,truthyAttr:Bt,attrBetter:Wt,removeAttrBetter:Vt,textBetter:Yt}),$.queryString=function(e){u("Use of jQuery has been deprecated. Use CIQ.qs() to return an object containing querystring tokens instead of $.querystring().");for(var t=window.location.search.substring(1),r=t.split("&"),n=0;n<r.length;n++){var i=r[n].split("=");if(i[0]==e)return i[1]}return null}}a.UI||(a.UI={});a.UI.allContexts=function(){return u("CIQ.UI.allContexts has been deprecated. Use document.querySelectorAll('cq-context,*[cq-context]') instead."),$("cq-context,*[cq-context]")};a.UI.observe=function(e){if(u("CIQ.UI.observe has been deprecated.  Use CIQ.UI.observeProperty instead."),!Object.observe){u("You must include thirdparty/object-observe.js in your project to use CIQ.UI.observe.");return}if(typeof $!="function"||!$.fn){u("You must include jQuery in your project to use CIQ.UI.observe.");return}var t=this;function r(i){var s=!1;if(!e.member)s=!0;else if(i.name===e.member)s=!0;else if(e.member.constructor==Array)for(var o=0;o<e.member.length;o++)i.name===e.member[o]&&(s=!0);if(s){var c=$(e.selector);if(!c.length&&e.action==="callback"){e.value.call(t,e);return}e.action==="class"&&c.removeClass(e.value),c.each(function(){var l=!1;e.member&&(e.condition?e.obj[e.member]===e.condition&&(l=!0):l=e.obj[e.member]),e.action==="class"&&l&&c.addClass(e.value),e.action==="callback"&&e.value.call(t,e,this),e.action==="value"&&(e.value?this.value=e.value:e.obj[e.member]?this.value=e.obj[e.member]:this.value="")})}}var n=function(i){i.forEach(r)};return Object.observe(e.obj,n,["update","add","delete"]),r({name:e.member}),n};a.UI.unobserve=function(e){u("CIQ.UI.unobserve has been deprecated.  Use CIQ.UI.unobserveProperty instead."),Object.unobserve&&Object.unobserve(e.obj,e.handler)};a.UI.trulyVisible=function(e){return u("CIQ.UI.trulyVisible has been deprecated.  Use CIQ.trulyVisible instead."),a.trulyVisible(e)};a.UI.Lookup=function(){};a.UI.Lookup.Driver=function(){this.deprecated=!0};a.UI.Lookup.Driver.prototype.acceptText=function(e,t,r,n){this.cb};a.UI.Lookup.Driver.ChartIQ=function(e){u("CIQ.UI.Lookup.Driver.ChartIQ has been deprecated.  Use CIQ.ChartEngine.Driver.Lookup.ChartIQ instead."),this.exchanges=e,this.exchanges||(this.exchanges=["XNYS","XASE","XNAS","XASX","INDCBSX","INDXASE","INDXNAS","IND_DJI","ARCX","INDARCX","forex"]),this.url="https://symbols.chartiq.com/chiq.symbolserver.SymbolLookup.service",this.requestCounter=0};a.inheritsFrom(a.UI.Lookup.Driver.ChartIQ,a.UI.Lookup.Driver);a.UI.Lookup.Driver.ChartIQ.prototype.acceptText=function(e,t,r,n){t=="FX"&&(t="FOREX"),isNaN(parseInt(r,10))&&(r=100);var i=this.url+"?t="+encodeURIComponent(e)+"&m="+r+"&x=[";this.exchanges&&(i+=this.exchanges.join(",")),i+="]",t&&t.toUpperCase()!="ALL"&&(i+="&e="+t);var s=++this.requestCounter,o=this;function c(l,h){if(!(s<o.requestCounter)&&l==200)try{h=JSON.parse(h);for(var d=h.payload.symbols,g=[],f=0;f<d.length;f++){var b=d[f].split("|"),m={symbol:b[0],name:b[1],exchDisp:b[2]};g.push({display:[m.symbol,m.name,m.exchDisp],data:m})}n(g)}catch(y){}}a.postAjax({url:i,cb:c})};a.UI.BaseComponent&&(a.UI.BaseComponent.bind=function(e,t){u("CIQ.UI.BaseComponent.bind has been deprecated. Use CIQ.UI.BaseComponent.bindNode() instead."),a.UI.BaseComponent.bindNode(e,t)});var st=typeof global=="object"&&global&&global.Object===Object&&global,Gt=typeof self=="object"&&self&&self.Object===Object&&self,K=st||Gt||Function("return this")(),ge=K.Symbol,ot=Object.prototype,Xt=ot.hasOwnProperty,Zt=ot.toString,ie=ge?ge.toStringTag:void 0;function Kt(e){var t=Xt.call(e,ie),r=e[ie];try{e[ie]=void 0;var n=!0}catch(s){}var i=Zt.call(e);return n&&(t?e[ie]=r:delete e[ie]),i}var Jt=Object.prototype,er=Jt.toString;function tr(e){return er.call(e)}var rr="[object Null]",nr="[object Undefined]",Ye=ge?ge.toStringTag:void 0;function ye(e){return e==null?e===void 0?nr:rr:Ye&&Ye in Object(e)?Kt(e):tr(e)}function ce(e){return e!=null&&typeof e=="object"}var Se=Array.isArray;function H(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ct(e){return e}var ir="[object AsyncFunction]",ar="[object Function]",sr="[object GeneratorFunction]",or="[object Proxy]";function Le(e){if(!H(e))return!1;var t=ye(e);return t==ar||t==sr||t==ir||t==or}var qe=K["__core-js_shared__"],Ge=function(){var e=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cr(e){return!!Ge&&Ge in e}var lr=Function.prototype,ur=lr.toString;function hr(e){if(e!=null){try{return ur.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var dr=/[\\^$.*+?()[\]{}|]/g,pr=/^\[object .+?Constructor\]$/,fr=Function.prototype,gr=Object.prototype,mr=fr.toString,yr=gr.hasOwnProperty,vr=RegExp("^"+mr.call(yr).replace(dr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Cr(e){if(!H(e)||cr(e))return!1;var t=Le(e)?vr:pr;return t.test(hr(e))}function br(e,t){return e==null?void 0:e[t]}function Me(e,t){var r=br(e,t);return Cr(r)?r:void 0}var Xe=Object.create,xr=function(){function e(){}return function(t){if(!H(t))return{};if(Xe)return Xe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function wr(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Ir(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _r=800,Tr=16,Er=Date.now;function Ur(e){var t=0,r=0;return function(){var n=Er(),i=Tr-(n-r);if(r=n,i>0){if(++t>=_r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function qr(e){return function(){return e}}var me=function(){try{var e=Me(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Dr=me?function(e,t){return me(e,"toString",{configurable:!0,enumerable:!1,value:qr(t),writable:!0})}:ct,Sr=Ur(Dr),Pr=9007199254740991,Or=/^(?:0|[1-9]\d*)$/;function lt(e,t){var r=typeof e;return t=t==null?Pr:t,!!t&&(r=="number"||r!="symbol"&&Or.test(e))&&e>-1&&e%1==0&&e<t}function Ae(e,t,r){t=="__proto__"&&me?me(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ve(e,t){return e===t||e!==e&&t!==t}var Qr=Object.prototype,Lr=Qr.hasOwnProperty;function Mr(e,t,r){var n=e[t];(!(Lr.call(e,t)&&ve(n,r))||r===void 0&&!(t in e))&&Ae(e,t,r)}function Ar(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var c=t[s],l=void 0;l===void 0&&(l=e[c]),i?Ae(r,c,l):Mr(r,c,l)}return r}var Ze=Math.max;function kr(e,t,r){return t=Ze(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=Ze(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=n[i];return c[t]=r(o),wr(e,this,c)}}function jr(e,t){return Sr(kr(e,t,ct),e+"")}var Fr=9007199254740991;function ut(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Fr}function ke(e){return e!=null&&ut(e.length)&&!Le(e)}function Nr(e,t,r){if(!H(r))return!1;var n=typeof t;return(n=="number"?ke(r)&&lt(t,r.length):n=="string"&&t in r)?ve(r[t],e):!1}function Rr(e){return jr(function(t,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,o&&Nr(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var c=r[n];c&&e(t,c,n,s)}return t})}var zr=Object.prototype;function ht(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||zr;return e===r}function $r(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Hr="[object Arguments]";function Ke(e){return ce(e)&&ye(e)==Hr}var dt=Object.prototype,Br=dt.hasOwnProperty,Wr=dt.propertyIsEnumerable,Pe=Ke(function(){return arguments}())?Ke:function(e){return ce(e)&&Br.call(e,"callee")&&!Wr.call(e,"callee")};function Vr(){return!1}var pt=typeof P=="object"&&P&&!P.nodeType&&P,Je=pt&&typeof O=="object"&&O&&!O.nodeType&&O,Yr=Je&&Je.exports===pt,et=Yr?K.Buffer:void 0,Gr=et?et.isBuffer:void 0,ft=Gr||Vr,Xr="[object Arguments]",Zr="[object Array]",Kr="[object Boolean]",Jr="[object Date]",en="[object Error]",tn="[object Function]",rn="[object Map]",nn="[object Number]",an="[object Object]",sn="[object RegExp]",on="[object Set]",cn="[object String]",ln="[object WeakMap]",un="[object ArrayBuffer]",hn="[object DataView]",dn="[object Float32Array]",pn="[object Float64Array]",fn="[object Int8Array]",gn="[object Int16Array]",mn="[object Int32Array]",yn="[object Uint8Array]",vn="[object Uint8ClampedArray]",Cn="[object Uint16Array]",bn="[object Uint32Array]",x={};x[dn]=x[pn]=x[fn]=x[gn]=x[mn]=x[yn]=x[vn]=x[Cn]=x[bn]=!0;x[Xr]=x[Zr]=x[un]=x[Kr]=x[hn]=x[Jr]=x[en]=x[tn]=x[rn]=x[nn]=x[an]=x[sn]=x[on]=x[cn]=x[ln]=!1;function xn(e){return ce(e)&&ut(e.length)&&!!x[ye(e)]}function wn(e){return function(t){return e(t)}}var gt=typeof P=="object"&&P&&!P.nodeType&&P,ae=gt&&typeof O=="object"&&O&&!O.nodeType&&O,In=ae&&ae.exports===gt,De=In&&st.process,tt=function(){try{var e=ae&&ae.require&&ae.require("util").types;return e||De&&De.binding&&De.binding("util")}catch(t){}}(),rt=tt&&tt.isTypedArray,mt=rt?wn(rt):xn;function _n(e,t){var r=Se(e),n=!r&&Pe(e),i=!r&&!n&&ft(e),s=!r&&!n&&!i&&mt(e),o=r||n||i||s,c=o?$r(e.length,String):[],l=c.length;for(var h in e)o&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||lt(h,l))||c.push(h);return c}function Tn(e,t){return function(r){return e(t(r))}}function En(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Un=Object.prototype,qn=Un.hasOwnProperty;function Dn(e){if(!H(e))return En(e);var t=ht(e),r=[];for(var n in e)n=="constructor"&&(t||!qn.call(e,n))||r.push(n);return r}function yt(e){return ke(e)?_n(e):Dn(e)}var oe=Me(Object,"create");function Sn(){this.__data__=oe?oe(null):{},this.size=0}function Pn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var On="__lodash_hash_undefined__",Qn=Object.prototype,Ln=Qn.hasOwnProperty;function Mn(e){var t=this.__data__;if(oe){var r=t[e];return r===On?void 0:r}return Ln.call(t,e)?t[e]:void 0}var An=Object.prototype,kn=An.hasOwnProperty;function jn(e){var t=this.__data__;return oe?t[e]!==void 0:kn.call(t,e)}var Fn="__lodash_hash_undefined__";function Nn(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=oe&&t===void 0?Fn:t,this}function z(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}z.prototype.clear=Sn;z.prototype.delete=Pn;z.prototype.get=Mn;z.prototype.has=jn;z.prototype.set=Nn;function Rn(){this.__data__=[],this.size=0}function Ce(e,t){for(var r=e.length;r--;)if(ve(e[r][0],t))return r;return-1}var zn=Array.prototype,$n=zn.splice;function Hn(e){var t=this.__data__,r=Ce(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():$n.call(t,r,1),--this.size,!0}function Bn(e){var t=this.__data__,r=Ce(t,e);return r<0?void 0:t[r][1]}function Wn(e){return Ce(this.__data__,e)>-1}function Vn(e,t){var r=this.__data__,n=Ce(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function k(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}k.prototype.clear=Rn;k.prototype.delete=Hn;k.prototype.get=Bn;k.prototype.has=Wn;k.prototype.set=Vn;var vt=Me(K,"Map");function Yn(){this.size=0,this.__data__={hash:new z,map:new(vt||k),string:new z}}function Gn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function be(e,t){var r=e.__data__;return Gn(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Xn(e){var t=be(this,e).delete(e);return this.size-=t?1:0,t}function Zn(e){return be(this,e).get(e)}function Kn(e){return be(this,e).has(e)}function Jn(e,t){var r=be(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function J(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}J.prototype.clear=Yn;J.prototype.delete=Xn;J.prototype.get=Zn;J.prototype.has=Kn;J.prototype.set=Jn;var Ct=Tn(Object.getPrototypeOf,Object),ei="[object Object]",ti=Function.prototype,ri=Object.prototype,bt=ti.toString,ni=ri.hasOwnProperty,ii=bt.call(Object);function ai(e){if(!ce(e)||ye(e)!=ei)return!1;var t=Ct(e);if(t===null)return!0;var r=ni.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&bt.call(r)==ii}function si(){this.__data__=new k,this.size=0}function oi(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function ci(e){return this.__data__.get(e)}function li(e){return this.__data__.has(e)}var ui=200;function hi(e,t){var r=this.__data__;if(r instanceof k){var n=r.__data__;if(!vt||n.length<ui-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new J(n)}return r.set(e,t),this.size=r.size,this}function ee(e){var t=this.__data__=new k(e);this.size=t.size}ee.prototype.clear=si;ee.prototype.delete=oi;ee.prototype.get=ci;ee.prototype.has=li;ee.prototype.set=hi;var xt=typeof P=="object"&&P&&!P.nodeType&&P,nt=xt&&typeof O=="object"&&O&&!O.nodeType&&O,di=nt&&nt.exports===xt,it=di?K.Buffer:void 0;it&&it.allocUnsafe;function pi(e,t){return e.slice()}var at=K.Uint8Array;function fi(e){var t=new e.constructor(e.byteLength);return new at(t).set(new at(e)),t}function gi(e,t){var r=fi(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function mi(e){return typeof e.constructor=="function"&&!ht(e)?xr(Ct(e)):{}}function yi(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),c=o.length;c--;){var l=o[++i];if(r(s[l],l,s)===!1)break}return t}}var vi=yi();function Oe(e,t,r){(r!==void 0&&!ve(e[t],r)||r===void 0&&!(t in e))&&Ae(e,t,r)}function Ci(e){return ce(e)&&ke(e)}function Qe(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function bi(e){return Ar(e,yt(e))}function xi(e,t,r,n,i,s,o){var c=Qe(e,r),l=Qe(t,r),h=o.get(l);if(h){Oe(e,r,h);return}var d=s?s(c,l,r+"",e,t,o):void 0,g=d===void 0;if(g){var f=Se(l),b=!f&&ft(l),m=!f&&!b&&mt(l);d=l,f||b||m?Se(c)?d=c:Ci(c)?d=Ir(c):b?(g=!1,d=pi(l)):m?(g=!1,d=gi(l)):d=[]:ai(l)||Pe(l)?(d=c,Pe(c)?d=bi(c):(!H(c)||Le(c))&&(d=mi(l))):g=!1}g&&(o.set(l,d),i(d,l,n,s,o),o.delete(l)),Oe(e,r,d)}function wt(e,t,r,n,i){e!==t&&vi(t,function(s,o){if(i||(i=new ee),H(s))xi(e,t,o,r,wt,n,i);else{var c=n?n(Qe(e,o),s,o+"",e,t,i):void 0;c===void 0&&(c=s),Oe(e,o,c)}},yt)}var wi=Rr(function(e,t,r){wt(e,t,r)});function Ii(){return`
  <cq-context class="cq-context ciq-night">
  <div class="ciq-nav">
    <div class="sidenav-toggle ciq-toggles">
      <cq-toggle
        class="ciq-sidenav"
        cq-member="sidenav"
        cq-toggles="sidenavOn,sidenavOff"
        cq-toggle-classes="active,"
        keyboard-navigation="false"
        ><span></span><cq-tooltip>More</cq-tooltip>
      </cq-toggle>
    </div>
    <cq-side-nav cq-on="sidenavOn"
      ><div class="icon-toggles ciq-toggles">
        <cq-toggle class="ciq-draw" cq-member="drawing"
          ><cq-help help-id="drawing_tools_toggle"></cq-help><span></span
          ><cq-tooltip>Draw</cq-tooltip></cq-toggle
        ><cq-info-toggle-dropdown
          ><cq-toggle class="ciq-CH" cq-member="crosshair"
            ><span></span
            ><cq-tooltip>Crosshair (Alt + \\)</cq-tooltip></cq-toggle
          ><cq-menu class="ciq-menu toggle-options collapse"
            ><span></span
            ><cq-menu-dropdown
              ><cq-item cq-member="crosshair"
                >Hide Heads-Up Display<span class="ciq-radio"
                  ><span></span></span></cq-item
                ><cq-item cq-member="headsUp-static"
                >Show Heads-Up Display<span class="ciq-radio"><span></span></span
                ></cq-item
              ></cq-menu-dropdown
            ></cq-menu
          ></cq-info-toggle-dropdown
        ><cq-info-toggle-dropdown
          ><cq-toggle class="ciq-HU" cq-member="headsUp"
            ><span></span><cq-tooltip>Info</cq-tooltip></cq-toggle
          ><cq-menu class="ciq-menu toggle-options collapse tooltip-ui"
            ><span></span
            ><cq-menu-dropdown
              ><cq-item cq-member="headsUp-dynamic"
                >Show Dynamic Callout<span class="ciq-radio"><span></span></span
              ></cq-item
              ><cq-item cq-member="headsUp-floating"
                >Show Tooltip<span class="ciq-radio"><span></span></span
              ></cq-item
            ></cq-menu-dropdown
          ></cq-menu
        ></cq-info-toggle-dropdown
        ><cq-toggle
          class="ciq-DT tableview-ui"
          cq-member="tableView"
          role="button"
          aria-pressed="false"
          ><span></span><cq-tooltip>Table View</cq-tooltip></cq-toggle
        >
      </div></cq-side-nav
    >
    <div class="ciq-menu-section">
      <div class="ciq-dropdowns">
        <cq-menu class='ciq-menu ciq-views collapse'>
          <span>Views</span>
          <cq-menu-dropdown>
            <cq-views></cq-views>
          </cq-menu-dropdown>
        </cq-menu>
        <cq-menu class='ciq-menu ciq-studies collapse' cq-focus='input'>
          <span>Studies</span>
          <cq-menu-dropdown>
            <cq-study-menu-manager></cq-study-menu-manager>
          </cq-menu-dropdown>
        </cq-menu>
        <cq-menu class="ciq-menu ciq-preferences collapse"
          ><span></span
          ><cq-menu-dropdown
            ><cq-menu-dropdown-section class="chart-preferences"
              ><cq-heading>Chart Preferences</cq-heading
              ><cq-menu-container
                cq-name="menuChartPreferences"
              ></cq-menu-container
              ><cq-separator></cq-separator></cq-menu-dropdown-section
            ><cq-menu-dropdown-section class="y-axis-preferences"
              ><cq-heading>Y-Axis Preferences</cq-heading
              ><cq-menu-container
                cq-name="menuYAxisPreferences"
              ></cq-menu-container
              ><cq-separator></cq-separator></cq-menu-dropdown-section
            ><cq-menu-dropdown-section class="chart-addons"
              ><cq-heading>Additional Features</cq-heading
              ><cq-menu-container cq-name="menuAddOns"></cq-menu-container
              ><cq-separator></cq-separator></cq-menu-dropdown-section
            ></cq-menu-dropdown
          >
        </cq-menu>
      </div>
    </div>
  </div>
  <div class="ciq-chart-area">
    <div class="ciq-chart">
      <cq-message-toaster
      ></cq-message-toaster
      ><cq-palette-dock
        ><div class="palette-dock-container"
        ><cq-drawing-settings
          class="palette-settings"
        ></cq-drawing-settings>
        <cq-drawing-palette
          docked="true"
          orientation="vertical"
        ></cq-drawing-palette
        ></div
      ></cq-palette-dock>
      <div class="chartContainer"></div>
    </div>
  </div>
</cq-context>
`}Ot(a);a.logVersion=()=>null;class _i{constructor(t){T(this,"chart");T(this,"options");T(this,"clearDrawSpread");T(this,"positionMarkerOption");T(this,"positionSpacingOption");T(this,"spreadOrderLine");this.options=t,this.clearDrawSpread=[],this.positionMarkerOption=[],this.positionSpacingOption=[],this.spreadOrderLine=[]}draw([t]){var r;(r=this.chart)==null||r.stxx.updateChartData({Last:(t.Close||0)*1e3,DT:new Date(t.DT).getTime()})}destroy(){this.clearDrawSpread.forEach(t=>t()),a.ChartEngine.prototype.remove("draw"),this.chart&&(this.chart.stxx.markers={},this.chart.destroy())}create(){if(this.options.mode===se.advanced)return new Ei(this.options);if(this.options.mode===se.basic)return new Ti(this.options)}createOrRecreate(t){if(this.chart)return!!(t.mode&&t.mode!==this.options.mode)||!!(t.periodicity&&t.periodicity!==this.options.periodicity)||!!(t.symbol&&t.symbol!==this.options.symbol)||!!(t.theme&&t.theme!==this.options.theme);{const r=Object.assign({},this.options,t);return!!(r.symbol&&r.mode&&r.periodicity&&r.theme)}}render(t){const r=this.createOrRecreate(t);Object.assign(this.options,t),r&&(this.chart&&this.chart.destroy(),this.chart=this.create()),this.chart&&this.chart.render(this.options)}addMarker(t){if(!this.chart)throw new Error("chart not build");if(!this.chart.stxx)throw new Error("stxx not build");t.forEach(r=>{const{markerType:n,label:i,x:s,y:o,innerHTML:c}=r,l=document.getElementById(n);if(!l||!this.chart)return;a.Marker.removeByLabel(this.chart.stxx,i);const h=l.cloneNode(!1);h.innerHTML=c;const d={stx:this.chart.stxx,xPositioner:"date",x:new Date(s),yPositioner:"on_candle",y:o,label:i,node:h};new a.Marker(d)}),this.chart.stxx.draw()}removeMarker(t){if(!this.chart)throw new Error("chart not build");if(!this.chart.stxx)throw new Error("stxx not build");t.forEach(r=>{a.Marker.removeByLabel(this.chart.stxx,r)})}positionMarker(t){this.positionMarkerOption=t;const r=a.ChartEngine.prototype.append("draw",()=>{this.positionMarkerOption.forEach(n=>{const{color:i,label:s,price:o}=n;if(!this.chart||!this.chart.stxx||!i||!s||!o||!n.show)return;const{panel:c}=this.chart.stxx.chart,l=this.chart.stxx.pixelFromPrice(o*1e3,c),h={x0:0,x1:1,y0:l,y1:l,color:i,type:"line"};try{this.chart.stxx.startClip(),this.chart.stxx.plotLine(h),this.chart.stxx.endClip(),this.chart.stxx.createYAxisLabel(c,s,l,i,"#000")}catch(d){console.error(d)}})});t.length||a.ChartEngine.prototype.removeInjection(r)}positionSpacing(t){this.positionSpacingOption=t;const r=a.ChartEngine.prototype.append("draw",()=>{this.positionSpacingOption.forEach(n=>{const{color:i,price:s,startTime:o,endTime:c,show:l}=n;if(!this.chart||!this.chart.stxx||!i||!s||!o||!c||!l)return;const{panel:h}=this.chart.stxx.chart,d=this.chart.stxx.pixelFromPrice(s*1e3,h),g=this.chart.stxx.pixelFromDate(new Date(o),this.chart.stxx.chart),f=this.chart.stxx.pixelFromDate(new Date(c-500),this.chart.stxx.chart),b={x0:g,x1:f,y0:d,y1:d,color:i,type:"segment"},m={x0:f,x1:f,y0:0,y1:1,color:i,type:"line"};try{this.chart.stxx.startClip(),this.chart.stxx.plotLine(m),this.chart.stxx.plotLine(b),this.chart.stxx.endClip()}catch(y){console.error(y)}})});t.length||a.ChartEngine.prototype.removeInjection(r)}drawSpreadOrderLine(t){this.spreadOrderLine=t;const r=a.ChartEngine.prototype.append("draw",()=>{this.spreadOrderLine.forEach(n=>{const{color:i,startPrice:s,spreadPrice:o,startTime:c,endTime:l,show:h}=n;if(!this.chart||!this.chart.stxx||!h||!i||!s||!o||!c||!l)return;const{panel:d}=this.chart.stxx.chart,g=this.chart.stxx.pixelFromPrice(s*1e3,d),f=this.chart.stxx.pixelFromPrice(o*1e3,d),b=this.chart.stxx.pixelFromDate(new Date(c),this.chart.stxx.chart),m=this.chart.stxx.pixelFromDate(new Date(l-500),this.chart.stxx.chart),y={x0:b,x1:m,y0:f,y1:f,color:i,type:"segment",opacity:.5},D={x0:m,x1:m,y0:0,y1:1,color:i,type:"line",opacity:.5},v={x0:b,x1:b,y0:g,y1:f,color:i,type:"segment",pattern:"dashed",opacity:.5};try{this.chart.stxx.startClip(),this.chart.stxx.plotLine(D),this.chart.stxx.plotLine(y),this.chart.stxx.plotLine(v),this.chart.stxx.endClip()}catch(_){console.error(_)}})});t.length||a.ChartEngine.prototype.removeInjection(r)}drawSpreadLine(t){this.clearDrawSpread.length&&this.clearDrawSpread.forEach(n=>n());const r=a.ChartEngine.prototype.append("drawCurrentHR",()=>{if(t<=0||!this.chart||!this.chart.stxx)return;const n=this.chart.stxx.currentQuote();if(!n)return;const i=n.Close/1e3,{panel:s}=this.chart.stxx.chart,o=this.chart.stxx.pixelFromDate(n.DT,this.chart.stxx.chart),c=this.chart.stxx.pixelFromPrice(this.chart.stxx.chart.yAxis.high,s),l=this.chart.stxx.pixelFromPrice(this.chart.stxx.chart.yAxis.low,s),h=this.chart.stxx.pixelFromPrice((i+t)*1e3,s),d=this.chart.stxx.pixelFromPrice((i-t)*1e3,s),g=Math.max(h,c),f=Math.min(d,l),b=this.chart.stxx.chart.width,m={x:0,y:g,width:b,height:f-g,fillColor:"rgba(100, 100, 100, 0.15)"},y={x0:0,x1:o,y0:g,y1:g,color:"rgba(46, 204, 113, 0.5)",type:"line"},D={x0:0,x1:o,y0:f,y1:f,color:"rgba(255, 84, 73, 0.5)",type:"line"};try{this.chart.stxx.startClip();const v=this.chart.stxx.chart.context;v.save(),v.beginPath(),v.rect(m.x,m.y,m.width,m.height),v.fillStyle=m.fillColor,v.fill(),v.restore(),this.chart.stxx.plotLine(y),this.chart.stxx.plotLine(D),this.chart.stxx.endClip()}catch(v){console.error(v)}});this.clearDrawSpread.push(()=>a.ChartEngine.prototype.removeInjection(r))}}class It{constructor(t){T(this,"options");T(this,"stxx");T(this,"feed");T(this,"clearFunctions");this.clearFunctions=[],this.options=t,this.feed={fetchInitialData:pe(t.fetchInitial),fetchPaginationData:pe(t.fetchPagination)},this.stxx=this.create(),this.init()}init(){const{onLoadingChange:t,symbol:r,theme:n}=this.options;new a.Animation({stx:this.stxx,animationParameters:{tension:.3},easeMachine:new a.EaseMachine("easeInOutQuad",500)}),t&&t(!0),this.stxx.loadChart(r,void 0,()=>{t&&t(!1)}),this.setTheme(n),this.bindDrawResetLine(),this.fixDrawCurrentPriceLine()}fixDrawCurrentPriceLine(){a.ChartEngine.prototype.drawCurrentPriceLine=function(){const{currentHRParams:t}=this;if(t)for(const r in t){const{panel:n,y:i,backgroundColor:s}=t[r];this.plotLine({x0:n.left,x1:n.right,y0:i,y1:i,color:s,type:"line",pattern:"dashed",lineWidth:1,opacity:.8,context:n.chart.context})}}}bindDrawResetLine(){const t=a.ChartEngine.prototype.append("draw",()=>{if(this.options.symbol!=="STONKS/USD")return;const r=this.stxx.chart.dataSegment.filter(o=>o),n=864e5,i=new Date(r[0].DT).setUTCHours(0,0,0,0),s=new Date(r[r.length-1].DT).setUTCHours(0,0,0,0);for(let o=i;o<=s;){const c=this.stxx.pixelFromDate(new Date(o),this.stxx.chart);this.stxx.plotLine({x0:c,x1:c,y0:0,y1:1,color:"#ffe500",type:"line",confineToPanel:!0,pattern:"dashed"}),this.stxx.createXAxisLabel({panel:this.stxx.panels.chart,txt:"Reset",color:"#111",backgroundColor:"#ffe500",pointed:!1,padding:4,x:c}),o+=n}});this.clearFunctions.push(()=>a.ChartEngine.prototype.removeInjection(t))}destroy(){this.stxx&&(this.clearFunctions.forEach(t=>t()),this.stxx.clear(),this.stxx.detachQuoteFeed(this.feed),this.stxx.destroy(),this.options.container.innerHTML="")}setTheme(t){if(this.options.mode!==se.advanced)return;const r=this.options.container.querySelector("cq-context");t==="lighten"?(r.classList.remove("ciq-night"),r.classList.add("ciq-day")):(r.classList.remove("ciq-day"),r.classList.add("ciq-night")),this.stxx.draw()}get context(){if(this.options.mode===se.advanced)return this.options.container.querySelector("cq-context")}render(t){t.theme&&t.theme!==this.options.theme&&this.setTheme(t.theme),t.fetchInitial&&t.fetchInitial!==this.options.fetchInitial&&(this.feed.fetchInitialData=pe(t.fetchInitial)),t.fetchPagination&&t.fetchInitial!==this.options.fetchPagination&&(this.feed.fetchPaginationData=pe(t.fetchPagination)),Object.assign(this.options,t)}}function _t(e){const{periodicity:t}=e,{interval:r,period:n,timeUnit:i}=Lt[t].value;return{streamParameters:{maxWait:0,maxTicks:100},layout:{chartType:t==="500ms"?"mountain":"candle",crosshair:!a.isMobile,candleWidth:10,interval:`${r}`,periodicity:n,timeUnit:i},minimumCandleWidth:5,maximumCandleWidth:20,yaxisLabelStyle:"roundRectArrow",xaxisHeight:18,preferences:{currentPriceLine:!0,whitespace:a.isMobile?0:40},chart:{yAxis:{justifyRight:!0,displayGridLines:!1,displayBorder:!1,initialMarginTop:12,initialMarginBottom:12,goldenRatioYAxis:!1,priceFormatter:(s,o,c)=>{const l=c/1e3,h=Math.max(Ui(l),2);return l.toLocaleString("en-US",{minimumFractionDigits:h,maximumFractionDigits:h})}},xAxis:{displayGridLines:!1,displayBorder:!1,fitLeftToRight:!0}}}}class Ti extends It{create(){const{periodicity:t="500ms"}=this.options,r=new a.ChartEngine(Ve(We({},_t({periodicity:t})),{quoteFeed:this.feed,container:this.options.container}));return r.attachQuoteFeed(this.feed,{refreshInterval:0}),r}}class Ei extends It{create(){this.options.container.innerHTML=Ii();const{periodicity:t="500ms"}=this.options,r=Qt();r.initialSymbol=null,r.enabledAddOns.fullScreen=window===window.parent,r.enabledAddOns.animation=!0,r.enabledAddOns.extendedHours=!1,r.restore=!1;const n=new a.UI.Chart().createChartAndUI({config:r,container:this.options.container.querySelector("cq-context")});return n.stx.attachQuoteFeed(this.feed,{refreshInterval:0}),wi(n.stx,_t({periodicity:t})),n.stx}}function Ui(e){const t=Math.abs(e);return t===0?2:t>=1e5?0:t>=1e4?1:t>=1e3?2:t>=100?3:t>=10?4:t>=1?5:t>=.1?6:t>=.01?7:t>=.001?8:9}class qi{constructor(){T(this,"options");T(this,"chart");T(this,"onMessage",t=>{if(typeof t.data=="string")try{const r=JSON.parse(t.data);if(r.type==="initial")this.fetchInitialResolve(r.payload);else if(r.type==="pagination")this.fetchPaginationResolve(r.payload);else if(r.type==="draw")this.chart.draw(r.payload);else if(r.type==="render")this.render(r.payload);else if(r.type==="addMarker")this.chart.addMarker(r.payload);else if(r.type==="removeMarker")this.chart.removeMarker(r.payload);else if(r.type==="positionOrder")this.chart.positionMarker(r.payload);else if(r.type==="positionSpacing")this.chart.positionSpacing(r.payload);else if(r.type==="drawSpreadLine")this.chart.drawSpreadLine(r.payload);else if(r.type==="drawSpreadOrderLine")this.chart.drawSpreadOrderLine(r.payload);else if(r.type==="set-theme"){const{klineBottomColor:n,klineTopColor:i,klineBorderColor:s,klineWidth:o,theme:c}=r.payload;n&&document.body.style.setProperty("--kline-bottom-color",n),i&&document.body.style.setProperty("--kline-top-color",i),s&&document.body.style.setProperty("--kline-border-color",s),o&&document.body.style.setProperty("--kline-width",o),this.render({theme:c}),document.body.className=c||""}}catch(r){console.error(r)}});T(this,"fetchInitialResolve");T(this,"fetchInitialData",(t,r,n,i,s)=>Ue(this,null,function*(){const o=yield new Promise(c=>{this.fetchInitialResolve=c,setTimeout(()=>{fe({type:"initial",payload:{symbol:t,start:r.getTime(),end:n.getTime(),params:{timeunit:i.interval,interval:i.period}}})},100)});return s({quotes:o}),o}));T(this,"fetchPaginationResolve");T(this,"fetchPaginationData",(t,r,n,i,s)=>Ue(this,null,function*(){const o=yield new Promise(c=>{this.fetchPaginationResolve=c,fe({type:"pagination",payload:{start:r.getTime(),end:n.getTime(),symbol:t,params:{timeunit:i.interval,interval:i.period}}})});return s({quotes:o}),o}));this.options={},this.bindEvent(),this.chart=new _i({container:document.getElementById("chart-container"),fetchInitial:this.fetchInitialData,fetchPagination:this.fetchPaginationData,onLoadingChange:this.onLoadingChange})}bindEvent(){window.addEventListener("message",this.onMessage,!1),fe({type:"ready-to-create"})}destroy(){this.chart.destroy(),window.removeEventListener("message",this.onMessage)}onLoadingChange(t){fe({type:"loading-change",payload:t})}render(t){Object.assign(this.options,t),this.chart.render(this.options)}}new qi;function fe(e){window.parent.postMessage(JSON.stringify(e),{targetOrigin:"*"})}window.onerror=()=>!0});export default Di();
